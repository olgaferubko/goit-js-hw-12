{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46848522-362871de9bc7c195a5b36e0f9';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error('Не вдалося виконати запит');\n  }\n}\n","export function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(image => `\n      <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </a>\n    `)\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.getElementById('load-more');\nlet query = '';\nlet page = 1;\nlet lightbox;\nconst perPage = 15;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.warning({ title: 'Попередження', message: 'Будь ласка, введіть запит' });\n    return;\n  }\n\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.error({ title: 'Помилка', message: 'Нічого не знайдено' });\n      return;\n    }\n\n    renderImages(data.hits);\n    loadMoreButton.style.display = 'block';\n    initializeLightbox();\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({ title: 'Інформація', message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Помилка', message: 'Не вдалося завантажити зображення' });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    renderImages(data.hits);\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({ title: 'Інформація', message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n    \n    smoothScroll();\n  } catch (error) {\n    iziToast.error({ title: 'Помилка', message: 'Не вдалося завантажити зображення' });\n  }\n});\n\nfunction initializeLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","renderImages","images","gallery","markup","image","form","loadMoreButton","lightbox","event","iziToast","data","initializeLightbox","smoothScroll","SimpleLightbox","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAC9J,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,2BAA2B,CAC5C,CACH,CCbO,SAASE,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IAAIG,GAAS;AAAA,iBACDA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,6BAE7BA,EAAM,KAAK;AAAA,6BACXA,EAAM,KAAK;AAAA,gCACRA,EAAM,QAAQ;AAAA,iCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG3C,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CCTA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAiB,SAAS,eAAe,WAAW,EAC1D,IAAIX,EAAQ,GACRC,EAAO,EACPW,EACJ,MAAMV,EAAU,GAEhBQ,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAI7C,GAHAA,EAAM,eAAc,EACpBb,EAAQa,EAAM,OAAO,SAAS,YAAY,MAAM,OAE5C,CAACb,EAAO,CACVc,EAAS,QAAQ,CAAE,MAAO,eAAgB,QAAS,2BAA2B,CAAE,EAChF,MACD,CAEDb,EAAO,EACPM,EAAQ,UAAY,GACpBI,EAAe,MAAM,QAAU,OAE/B,GAAI,CACF,MAAMI,EAAO,MAAMhB,EAAYC,EAAOC,EAAMC,CAAO,EAEnD,GAAIa,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CAAE,MAAO,UAAW,QAAS,oBAAoB,CAAE,EAClE,MACD,CAEDT,EAAaU,EAAK,IAAI,EACtBJ,EAAe,MAAM,QAAU,QAC/BK,IAEIf,EAAOC,GAAWa,EAAK,YACzBJ,EAAe,MAAM,QAAU,OAC/BG,EAAS,KAAK,CAAE,MAAO,aAAc,QAAS,4DAA4D,CAAE,EAE/G,MAAe,CACdA,EAAS,MAAM,CAAE,MAAO,UAAW,QAAS,mCAAmC,CAAE,CAClF,CACH,CAAC,EAEDH,EAAe,iBAAiB,QAAS,SAAY,CACnDV,GAAQ,EAER,GAAI,CACF,MAAMc,EAAO,MAAMhB,EAAYC,EAAOC,EAAMC,CAAO,EACnDG,EAAaU,EAAK,IAAI,EAElBH,GACFA,EAAS,QAAO,EAGdX,EAAOC,GAAWa,EAAK,YACzBJ,EAAe,MAAM,QAAU,OAC/BG,EAAS,KAAK,CAAE,MAAO,aAAc,QAAS,4DAA4D,CAAE,GAG9GG,GACD,MAAe,CACdH,EAAS,MAAM,CAAE,MAAO,UAAW,QAAS,mCAAmC,CAAE,CAClF,CACH,CAAC,EAED,SAASE,GAAqB,CACxBJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIM,EAAe,YAAY,CAE9C,CAEA,SAASD,GAAe,CACtB,KAAM,CAAE,OAAQE,CAAU,EAAKZ,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKY,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}